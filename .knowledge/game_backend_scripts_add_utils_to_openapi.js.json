{"is_source_file": true, "format": "JavaScript", "description": "This script updates an OpenAPI JSON specification by adding a 'Utils' tag and a '/api/utils/distance' endpoint if they are not already present. It reads the OpenAPI spec, modifies its contents, and writes it back to the file system.", "external_files": ["fs", "path", "url"], "external_methods": ["readFileSync", "writeFileSync", "join", "dirname", "fileURLToPath"], "published": [], "classes": [], "methods": [], "calls": ["readFileSync", "writeFileSync", "JSON.parse", "console.log", "JSON.stringify"], "search-terms": ["add_utils_to_openapi", "openapi.json", "utils tag", "distance endpoint", "/api/utils/distance", "calculateDistance", "Haversine formula"], "state": 2, "file_id": 37, "knowledge_revision": 104, "git_revision": "48a8f4bc6ce83e17c36db87c057f7e282740e193", "ctags": [{"_type": "tag", "name": "$ref", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^              schema: { $ref: '#\\/components\\/schemas\\/ValidationErrorResponse' }$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.responses.400.content.application/json.schema", "scopeKind": "class"}, {"_type": "tag", "name": "200", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^        '200': {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.responses", "scopeKind": "class"}, {"_type": "tag", "name": "400", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^        '400': {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.responses", "scopeKind": "class"}, {"_type": "tag", "name": "__dirname", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^const __dirname = dirname(__filename);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "__filename", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^const __filename = fileURLToPath(import.meta.url);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "allOf", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                allOf: [$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.responses.200.content.application/json.schema", "scopeKind": "class"}, {"_type": "tag", "name": "application/json", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^            'application\\/json': {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.responses.200.content", "scopeKind": "class"}, {"_type": "tag", "name": "application/json", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^            'application\\/json': {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.responses.400.content", "scopeKind": "class"}, {"_type": "tag", "name": "application/json", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^          'application\\/json': {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.requestBody.content", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^          content: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.responses.200", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^          content: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.responses.400", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^        content: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.requestBody", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  description: 'First point latitude'$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat1", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  description: 'First point longitude'$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon1", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  description: 'Second point latitude'$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat2", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  description: 'Second point longitude'$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon2", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^          description: 'Distance calculated successfully',$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.responses.200", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^          description: 'Validation error',$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.responses.400", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^      description: 'Calculate the distance in meters between two geographic coordinates using th/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post", "scopeKind": "class"}, {"_type": "tag", "name": "lat1", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                lat1: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties", "scopeKind": "class"}, {"_type": "tag", "name": "lat2", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                lat2: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties", "scopeKind": "class"}, {"_type": "tag", "name": "lon1", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                lon1: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties", "scopeKind": "class"}, {"_type": "tag", "name": "lon2", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                lon2: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties", "scopeKind": "class"}, {"_type": "tag", "name": "maximum", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  maximum: 180,$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon1", "scopeKind": "class"}, {"_type": "tag", "name": "maximum", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  maximum: 180,$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon2", "scopeKind": "class"}, {"_type": "tag", "name": "maximum", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  maximum: 90,$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat1", "scopeKind": "class"}, {"_type": "tag", "name": "maximum", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  maximum: 90,$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat2", "scopeKind": "class"}, {"_type": "tag", "name": "minimum", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  minimum: -180,$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon1", "scopeKind": "class"}, {"_type": "tag", "name": "minimum", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  minimum: -180,$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon2", "scopeKind": "class"}, {"_type": "tag", "name": "minimum", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  minimum: -90,$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat1", "scopeKind": "class"}, {"_type": "tag", "name": "minimum", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  minimum: -90,$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat2", "scopeKind": "class"}, {"_type": "tag", "name": "openapi", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^const openapi = JSON.parse(readFileSync(openapiPath, 'utf8'));$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "openapiPath", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^const openapiPath = join(__dirname, '..', 'openapi.json');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "operationId", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^      operationId: 'calculateDistance',$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post", "scopeKind": "class"}, {"_type": "tag", "name": "paths", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^  openapi.paths['\\/api\\/utils\\/distance'] = {$/", "language": "JavaScript", "kind": "class", "scope": "openapi", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^    post: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths", "scopeKind": "class"}, {"_type": "tag", "name": "properties", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^              properties: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.requestBody.content.application/json.schema", "scopeKind": "class"}, {"_type": "tag", "name": "requestBody", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^      requestBody: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post", "scopeKind": "class"}, {"_type": "tag", "name": "required", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^              required: ['lat1', 'lon1', 'lat2', 'lon2'],$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema", "scopeKind": "class"}, {"_type": "tag", "name": "required", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^        required: true,$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody", "scopeKind": "class"}, {"_type": "tag", "name": "responses", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^      responses: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post", "scopeKind": "class"}, {"_type": "tag", "name": "schema", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^              schema: { $ref: '#\\/components\\/schemas\\/ValidationErrorResponse' }$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.responses.400.content.application/json", "scopeKind": "class"}, {"_type": "tag", "name": "schema", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^              schema: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.responses.200.content.application/json", "scopeKind": "class"}, {"_type": "tag", "name": "schema", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^            schema: {$/", "language": "JavaScript", "kind": "class", "scope": "openapi.paths.post.requestBody.content.application/json", "scopeKind": "class"}, {"_type": "tag", "name": "summary", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^      summary: 'Calculate distance between two points',$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^      tags: ['Utils'],$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  type: 'number',$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat1", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  type: 'number',$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat2", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  type: 'number',$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon1", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^                  type: 'number',$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon2", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/scripts/add_utils_to_openapi.js", "pattern": "/^              type: 'object',$/", "language": "JavaScript", "kind": "property", "scope": "openapi.paths.post.requestBody.content.application/json.schema", "scopeKind": "class"}], "hash": "cf2b1c9d06753c714b9d691d7f04c9ae", "format-version": 4, "code-base-name": "game_backend", "filename": "game_backend/scripts/add_utils_to_openapi.js", "fields": [{"name": "schema: { $ref: '#\\/components\\/schemas\\/ValidationErrorResponse' }", "scope": "openapi.paths.post.responses.400.content.application/json.schema", "scopeKind": "class", "description": "unavailable"}, {"name": "allOf: [", "scope": "openapi.paths.post.responses.200.content.application/json.schema", "scopeKind": "class", "description": "unavailable"}, {"name": "description: 'First point latitude'", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat1", "scopeKind": "class", "description": "unavailable"}, {"name": "description: 'First point longitude'", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon1", "scopeKind": "class", "description": "unavailable"}, {"name": "description: 'Second point latitude'", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat2", "scopeKind": "class", "description": "unavailable"}, {"name": "description: 'Second point longitude'", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon2", "scopeKind": "class", "description": "unavailable"}, {"name": "description: 'Distance calculated successfully',", "scope": "openapi.paths.post.responses.200", "scopeKind": "class", "description": "unavailable"}, {"name": "description: 'Validation error',", "scope": "openapi.paths.post.responses.400", "scopeKind": "class", "description": "unavailable"}, {"name": "description: 'Calculate the distance in meters between two geographic coordinates using th/", "scope": "openapi.paths.post", "scopeKind": "class", "description": "unavailable"}, {"name": "maximum: 180,", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon1", "scopeKind": "class", "description": "unavailable"}, {"name": "maximum: 90,", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat1", "scopeKind": "class", "description": "unavailable"}, {"name": "minimum: -180,", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lon1", "scopeKind": "class", "description": "unavailable"}, {"name": "minimum: -90,", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat1", "scopeKind": "class", "description": "unavailable"}, {"name": "operationId: 'calculateDistance',", "scope": "openapi.paths.post", "scopeKind": "class", "description": "unavailable"}, {"name": "required: ['lat1', 'lon1', 'lat2', 'lon2'],", "scope": "openapi.paths.post.requestBody.content.application/json.schema", "scopeKind": "class", "description": "unavailable"}, {"name": "required: true,", "scope": "openapi.paths.post.requestBody", "scopeKind": "class", "description": "unavailable"}, {"name": "summary: 'Calculate distance between two points',", "scope": "openapi.paths.post", "scopeKind": "class", "description": "unavailable"}, {"name": "tags: ['Utils'],", "scope": "openapi.paths.post", "scopeKind": "class", "description": "unavailable"}, {"name": "type: 'number',", "scope": "openapi.paths.post.requestBody.content.application/json.schema.properties.lat1", "scopeKind": "class", "description": "unavailable"}, {"name": "type: 'object',", "scope": "openapi.paths.post.requestBody.content.application/json.schema", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"104": "48a8f4bc6ce83e17c36db87c057f7e282740e193"}]}