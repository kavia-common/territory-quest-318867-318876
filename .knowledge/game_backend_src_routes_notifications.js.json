{"is_source_file": true, "format": "JavaScript", "description": "This file defines Express routes for managing user notifications, including retrieving notifications, marking individual notifications as read, and marking all notifications as read. It includes validation, rate limiting, and authentication middleware.", "external_files": ["../middleware/auth.js", "../utils/supabase.js", "../middleware/rateLimiting.js", "../utils/logger.js"], "external_methods": ["authenticate", "callRPC", "readLimiter", "writeLimiter", "logger.error"], "published": ["Express.Router"], "classes": [], "methods": [{"name": "validate", "description": "A utility function to validate request data against a Joi schema, performing validation on body, query, and params."}], "calls": ["callRPC('get_user_notifications', {...})", "callRPC('mark_notification_read', {...})", "callRPC('mark_all_notifications_read', {...})", "logger.error(...)"], "search-terms": ["notifications route", "mark notification read", "get user notifications", "mark all notifications as read", "validation with Joi", "rate limiting", "authentication middleware"], "state": 2, "file_id": 17, "knowledge_revision": 115, "git_revision": "7b32d82aed68c50078d62934618de2741dd11fe7", "revision_history": [{"44": "c2b4720579c8e11ff8f0ec060c27f46eeddaf35b"}, {"60": "b6e1afb1699bb8488e9e9a23dadccf9079ddfd56"}, {"115": "7b32d82aed68c50078d62934618de2741dd11fe7"}], "ctags": [{"_type": "tag", "name": "abortEarly", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/notifications.js", "pattern": "/^      abortEarly: false,$/", "language": "JavaScript", "kind": "property", "scope": "validationOptions", "scopeKind": "class"}, {"_type": "tag", "name": "allowUnknown", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/notifications.js", "pattern": "/^      allowUnknown: true,$/", "language": "JavaScript", "kind": "property", "scope": "validationOptions", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/notifications.js", "pattern": "/^      const errors = error.details.map(detail => ({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/notifications.js", "pattern": "/^const router = express.Router();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "schemaToValidate", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/notifications.js", "pattern": "/^    const schemaToValidate = Joi.object(schema);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "stripUnknown", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/notifications.js", "pattern": "/^      stripUnknown: true$/", "language": "JavaScript", "kind": "property", "scope": "validationOptions", "scopeKind": "class"}, {"_type": "tag", "name": "toValidate", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/notifications.js", "pattern": "/^    const toValidate = {};$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validate", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/notifications.js", "pattern": "/^const validate = (schema) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validationOptions", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/notifications.js", "pattern": "/^    const validationOptions = {$/", "language": "JavaScript", "kind": "class"}], "hash": "df51530de68fa07e028e21d314d07cee", "format-version": 4, "code-base-name": "game_backend", "filename": "game_backend/src/routes/notifications.js", "fields": [{"name": "abortEarly: false,", "scope": "validationOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "allowUnknown: true,", "scope": "validationOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "stripUnknown: true", "scope": "validationOptions", "scopeKind": "class", "description": "unavailable"}]}