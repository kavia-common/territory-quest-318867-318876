{"is_source_file": true, "format": "JavaScript (Node.js/Express)", "description": "This file defines the Express routes for managing 'zones' in the game backend, including fetching zones within bounds or nearby, capturing zones, attacking and defending zones, and checking attack range. It includes validation middleware and calls external RPC functions.", "external_files": ["../middleware/auth.js", "../utils/supabase.js", "../utils/logger.js"], "external_methods": ["authenticate", "callRPC", "logger.error"], "published": ["router"], "classes": [], "methods": [{"name": "validate", "description": "Middleware utility for validating request data against a Joi schema"}], "calls": ["callRPC('get_zones_in_bounds', ...)", "callRPC('get_zones_within_radius', ...)", "callRPC('capture_zone', ...)", "callRPC('attack_zone', ...)", "callRPC('defend_zone', ...)", "callRPC('is_in_attack_range', ...)", "logger.error"], "search-terms": ["zones", "capture_zone", "attack_zone", "defend_zone", "bounds", "nearby", "attack-range", "validation", "middleware", "express.Router", "API endpoints"], "state": 2, "file_id": 14, "knowledge_revision": 57, "git_revision": "b6e1afb1699bb8488e9e9a23dadccf9079ddfd56", "revision_history": [{"41": "c2b4720579c8e11ff8f0ec060c27f46eeddaf35b"}, {"57": "b6e1afb1699bb8488e9e9a23dadccf9079ddfd56"}], "ctags": [{"_type": "tag", "name": "abortEarly", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/zones.js", "pattern": "/^      abortEarly: false,$/", "language": "JavaScript", "kind": "property", "scope": "validationOptions", "scopeKind": "class"}, {"_type": "tag", "name": "allowUnknown", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/zones.js", "pattern": "/^      allowUnknown: true,$/", "language": "JavaScript", "kind": "property", "scope": "validationOptions", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/zones.js", "pattern": "/^      const errors = error.details.map(detail => ({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/zones.js", "pattern": "/^const router = express.Router();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "schemaToValidate", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/zones.js", "pattern": "/^    const schemaToValidate = Joi.object(schema);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "stripUnknown", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/zones.js", "pattern": "/^      stripUnknown: true$/", "language": "JavaScript", "kind": "property", "scope": "validationOptions", "scopeKind": "class"}, {"_type": "tag", "name": "toValidate", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/zones.js", "pattern": "/^    const toValidate = {};$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validate", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/zones.js", "pattern": "/^const validate = (schema) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "validationOptions", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/routes/zones.js", "pattern": "/^    const validationOptions = {$/", "language": "JavaScript", "kind": "class"}], "hash": "c158d5e865a6cb6063129e481a8bac05", "format-version": 4, "code-base-name": "game_backend", "filename": "game_backend/src/routes/zones.js", "fields": [{"name": "abortEarly: false,", "scope": "validationOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "allowUnknown: true,", "scope": "validationOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "stripUnknown: true", "scope": "validationOptions", "scopeKind": "class", "description": "unavailable"}]}