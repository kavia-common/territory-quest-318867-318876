{"is_source_file": true, "format": "JavaScript (ES Modules)", "description": "This file is the main server setup script for a Node.js backend application. It initializes server configurations, middleware, routes, WebSocket support, and handles graceful shutdown procedures.", "external_files": ["./middleware/errorHandler.js", "./middleware/requestLogger.js", "./middleware/requestTimeout.js", "./middleware/notFoundHandler.js", "./utils/logger.js", "./routes/index.js", "./routes/health.js", "./websocket/index.js", "../openapi.json"], "external_methods": ["helmet()", "cors()", "rateLimit()", "express.json()", "express.urlencoded()", "requestLogger", "requestTimeout", "notFoundHandler", "errorHandler", "initializeWebSocket", "createServer", "fileURLToPath", "readFileSync", "join", "dirname"], "published": [], "classes": [], "methods": [{"name": "gracefulShutdown", "description": "Handles server shutdown for SIGTERM or SIGINT signals, closing HTTP and WebSocket connections cleanly."}, {"name": "AnonymousFunctionbcb6272f0100(origin, callback)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["app.use", "app.get", "logger.info", "logger.error", "wss.clients.forEach", "client.close", "wss.close", "httpServer.close", "setInterval", "clearInterval", "clearTimeout", "setTimeout", "process.on"], "search-terms": ["server.js", "WebSocketServer", "initializeWebSocket", "gracefulShutdown", "Express", "Node.js server", "middleware setup", "API documentation", "Graceful shutdown handling"], "state": 2, "file_id": 6, "knowledge_revision": 106, "git_revision": "288af2c5247aaa7338f150eb0dfbf9553b7048ac", "revision_history": [{"33": "c2b4720579c8e11ff8f0ec060c27f46eeddaf35b"}, {"77": "6d79e27fd64839ad21aa8f41944d816f6dd38be0"}, {"80": "04b3246851ae10567b69695e835750ddfc87619e"}, {"87": "9bd7d0b8c5d9ac40e9fc274fdba1c73e27818d24"}, {"90": "48a8f4bc6ce83e17c36db87c057f7e282740e193"}, {"106": "288af2c5247aaa7338f150eb0dfbf9553b7048ac"}], "ctags": [{"_type": "tag", "name": "ALLOWED_ORIGINS", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const ALLOWED_ORIGINS = process.env.ALLOWED_ORIGINS$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "AnonymousFunctionbcb6272f0100", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^  origin: function (origin, callback) {$/", "language": "JavaScript", "kind": "function", "signature": "(origin, callback)"}, {"_type": "tag", "name": "NODE_ENV", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const NODE_ENV = process.env.NODE_ENV || 'development';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "PORT", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const PORT = process.env.PORT || 3001;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "REQUEST_TIMEOUT_MS", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const REQUEST_TIMEOUT_MS = parseInt(process.env.REQUEST_TIMEOUT_MS || '30000');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "__dirname", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const __dirname = dirname(__filename);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "__filename", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const __filename = fileURLToPath(import.meta.url);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const app = express();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "checkConnections", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^  const checkConnections = setInterval(() => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "gracefulShutdown", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const gracefulShutdown = (signal) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "httpServer", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const httpServer = createServer(app);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isShuttingDown", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^let isShuttingDown = false;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "limiter", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const limiter = rateLimit({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "shutdownTimeout", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^  const shutdownTimeout = setTimeout(() => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "wss", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/server.js", "pattern": "/^const wss = new WebSocketServer({ $/", "language": "JavaScript", "kind": "constant"}], "hash": "809ad06e74e462e2752b247dbf0b5299", "format-version": 4, "code-base-name": "game_backend", "filename": "game_backend/src/server.js", "fields": [{"name": "let isShuttingDown = false;", "scope": "", "scopeKind": "", "description": "unavailable"}]}