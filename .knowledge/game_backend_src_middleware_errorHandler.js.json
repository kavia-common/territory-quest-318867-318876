{"is_source_file": true, "format": "JavaScript", "description": "This file is a middleware module for error handling in a Node.js server application. It defines error codes, an error handling middleware function, and exports these for integration with an Express.js server. The middleware logs errors and sends standardized error responses based on error types.", "external_files": ["../utils/logger.js"], "external_methods": ["logger.error"], "published": ["ERROR_CODES", "errorHandler"], "classes": [], "methods": [{"name": "errorHandler", "description": "Middleware function that catches errors, logs them, and sends standardized JSON error responses based on error type and environment."}], "calls": ["logger.error", "res.status", "res.json"], "search-terms": ["error handling middleware", "Error code constants", "Express.js error middleware", "structured logging", "error response standardization"], "state": 2, "file_id": 8, "knowledge_revision": 116, "git_revision": "7b32d82aed68c50078d62934618de2741dd11fe7", "revision_history": [{"35": "c2b4720579c8e11ff8f0ec060c27f46eeddaf35b"}, {"62": "b6e1afb1699bb8488e9e9a23dadccf9079ddfd56"}, {"116": "7b32d82aed68c50078d62934618de2741dd11fe7"}], "ctags": [{"_type": "tag", "name": "AUTHENTICATION_ERROR", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  AUTHENTICATION_ERROR: 'AUTHENTICATION_ERROR',$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "AUTHORIZATION_ERROR", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  AUTHORIZATION_ERROR: 'AUTHORIZATION_ERROR',$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "BAD_REQUEST", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  BAD_REQUEST: 'BAD_REQUEST',$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "CONFLICT", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  CONFLICT: 'CONFLICT',$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "DATABASE_ERROR", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  DATABASE_ERROR: 'DATABASE_ERROR',$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "ERROR_CODES", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^export const ERROR_CODES = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "INTERNAL_ERROR", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  INTERNAL_ERROR: 'INTERNAL_ERROR',$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "NOT_FOUND", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  NOT_FOUND: 'NOT_FOUND',$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "RATE_LIMIT_EXCEEDED", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  RATE_LIMIT_EXCEEDED: 'RATE_LIMIT_EXCEEDED',$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "TIMEOUT", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  TIMEOUT: 'TIMEOUT'$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "VALIDATION_ERROR", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  VALIDATION_ERROR: 'VALIDATION_ERROR',$/", "language": "JavaScript", "kind": "property", "scope": "ERROR_CODES", "scopeKind": "class"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  let details = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^    error: {$/", "language": "JavaScript", "kind": "property", "scope": "errorResponse", "scopeKind": "class"}, {"_type": "tag", "name": "errorCode", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  let errorCode = ERROR_CODES.INTERNAL_ERROR;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "errorHandler", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^export const errorHandler = (err, req, res, next) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "errorLog", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  const errorLog = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "errorResponse", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  const errorResponse = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "ip", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^    ip: req.ip$/", "language": "JavaScript", "kind": "property", "scope": "errorLog", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^      message,$/", "language": "JavaScript", "kind": "field", "scope": "errorResponse.error", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^    message: err.message,$/", "language": "JavaScript", "kind": "property", "scope": "errorLog", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  let message = err.message || 'Internal server error';$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^    method: req.method,$/", "language": "JavaScript", "kind": "property", "scope": "errorLog", "scopeKind": "class"}, {"_type": "tag", "name": "stack", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^    stack: err.stack,$/", "language": "JavaScript", "kind": "property", "scope": "errorLog", "scopeKind": "class"}, {"_type": "tag", "name": "statusCode", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^    statusCode: err.statusCode || err.status || 500,$/", "language": "JavaScript", "kind": "property", "scope": "errorLog", "scopeKind": "class"}, {"_type": "tag", "name": "statusCode", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^  let statusCode = err.statusCode || err.status || 500;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "success", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^    success: false,$/", "language": "JavaScript", "kind": "property", "scope": "errorResponse", "scopeKind": "class"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^    url: req.url,$/", "language": "JavaScript", "kind": "property", "scope": "errorLog", "scopeKind": "class"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/territory-quest-318867-318876/game_backend/src/middleware/errorHandler.js", "pattern": "/^    userId: req.userId || 'anonymous',$/", "language": "JavaScript", "kind": "property", "scope": "errorLog", "scopeKind": "class"}], "hash": "4b38a91d531581ef56d1c7fb2626c452", "format-version": 4, "code-base-name": "game_backend", "filename": "game_backend/src/middleware/errorHandler.js", "fields": [{"name": "AUTHENTICATION_ERROR: 'AUTHENTICATION_ERROR',", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "AUTHORIZATION_ERROR: 'AUTHORIZATION_ERROR',", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "BAD_REQUEST: 'BAD_REQUEST',", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "CONFLICT: 'CONFLICT',", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "DATABASE_ERROR: 'DATABASE_ERROR',", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "INTERNAL_ERROR: 'INTERNAL_ERROR',", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "NOT_FOUND: 'NOT_FOUND',", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "RATE_LIMIT_EXCEEDED: 'RATE_LIMIT_EXCEEDED',", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "TIMEOUT: 'TIMEOUT'", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "VALIDATION_ERROR: 'VALIDATION_ERROR',", "scope": "ERROR_CODES", "scopeKind": "class", "description": "unavailable"}, {"name": "let details = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "error: {", "scope": "errorResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "let errorCode = ERROR_CODES.INTERNAL_ERROR;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ip: req.ip", "scope": "errorLog", "scopeKind": "class", "description": "unavailable"}, {"name": "message,", "scope": "errorResponse.error", "scopeKind": "class", "description": "unavailable"}, {"name": "message: err.message,", "scope": "errorLog", "scopeKind": "class", "description": "unavailable"}, {"name": "let message = err.message || 'Internal server error';", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "method: req.method,", "scope": "errorLog", "scopeKind": "class", "description": "unavailable"}, {"name": "stack: err.stack,", "scope": "errorLog", "scopeKind": "class", "description": "unavailable"}, {"name": "statusCode: err.statusCode || err.status || 500,", "scope": "errorLog", "scopeKind": "class", "description": "unavailable"}, {"name": "let statusCode = err.statusCode || err.status || 500;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "success: false,", "scope": "errorResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "url: req.url,", "scope": "errorLog", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: req.userId || 'anonymous',", "scope": "errorLog", "scopeKind": "class", "description": "unavailable"}]}